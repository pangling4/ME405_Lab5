<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 405: Term Project: Term Project</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ME 405: Term Project
   </div>
   <div id="projectbrief">3R Parallel Robot</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Term Project </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
Software Design</h1>
<h2><a class="anchor" id="ss_FSM"></a>
Finite State Machine</h2>
<div class="image">
<img src="3R_FSM_Touch.drawio.png" alt=""/>
<div class="caption">
Finite State Diagram</div></div>
<p> The finite state machine first involves calibration. Before calibrating, the RoboTask is initialized and also activates the solenoid, lifting up the pen. Next is the touch screen calibration. If a calibration file exists, then the calibration procedure does not need to be performed. If not, the procedure is done by touching the touch pad at set points and calculating angle and scale biases that those that the touches might reveal. Then, the FSM transitions to calibrating the motors. A message is shown in the console to prompt the user to manually move the linkages of the robot, one arm at a time. The limit switch will run over a ramp once in an arbitrary direction and back over a second time in the opposite direction. The calibration code will read these limit switch signals and will set the encoder values in the motor to their respective correct values that were hand measured when building the robot. Finally, all communication queues that contain touch tracking and position data are cleared.</p>
<p>In the second state, the drawing executes if the robot is ready and if contact is made on the touch panel. When it touches the paper as the user is touching the touch pad, the drawing sequence is performed, letting the pen down to draw and moving the links based on the inverse kinematics of the robot task, and moving the motors at appropriate speeds based on closed loop control. When the user removes their finger from the touch pad, the solenoid pulls, raising the pen. States 1 and 2 are repeated until the program is halted. </p>
<h2><a class="anchor" id="ss_Task"></a>
Task Diagram</h2>
<p>We decided to combine the motor, encoder, and closed loop controller tasks within one task for each motor system. This creates three tasks, in which the respective joint angles are being sent from the robot task, which computes the inverse kinematics of the 3R joint parallel robot. Additionally, there is a touch task that corresponds to the user touching the touch pad, drawing with their finger. Their motions are stored positionally within queues. </p><div class="image">
<img src="TaskDiagram.png" alt=""/>
<div class="caption">
Task Diagram</div></div>
 </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0 </li>
  </ul>
</div>
</body>
</html>
