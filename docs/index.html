<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 405: Term Project: Term Project</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ME 405: Term Project
   </div>
   <div id="projectbrief">3R Parallel Robot</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Term Project </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
Software Design</h1>
<h2><a class="anchor" id="ss_FSM"></a>
Finite State Machine</h2>
<div class="image">
<img src="RobotFSM.png" alt=""/>
<div class="caption">
State Transition Diagram</div></div>
<p> The finite state machine is very simple. Although this design is not very robust, it reflects the state of our code when the robot was tested. The calibration for the touchpad and the encoders (finding a known angle) occurs in the <a class="el" href="main_8py.html" title="This file creates and runs all task objects to control the operation of a parallel 3RRR drawing robot...">main.py</a> file when each task is created. The constructor for jointTask and taskTouch each runs the calibrate method when a task is created which either reads from a file with given constants or asks for user input to calibrate the device. After the calibration for the touch pad and 3 links is complete, the task scheduler begins running. This finite state machine is found in the run method of roboTask, the "brain" task which interfaces between the touchpad user position and the inverse kinematics to provide angles for each of the joint (motor, encoder, controller) tasks.</p>
<p>S0 is the initialization state where all shared variables are reset. After this has been completed, the roboTask immediately transitions to S3 DRAWING, which runs the normal drawing operation for the robot. In this state, the brain checks whether any positions have been added to the x and y queues, then runs the inverse kinematics and updates the joint angles accordingly. If there are no positions to move to, the robot lifts the solenoid and waits until the queue is populated. The ready flag controls the end of the robot motion. When the program is exited, the ready flag is flippped, which stops the motors and solenoid.</p>
<h2><a class="anchor" id="ss_Task"></a>
Task Diagram</h2>
<p>We decided to combine the motor, encoder, and closed loop controller tasks within one task for each motor system. This creates three tasks, in which the respective joint angles are being sent from the robot task, which computes the inverse kinematics of the 3R joint parallel robot. Additionally, there is a touch task that corresponds to the user touching the touch pad, drawing with their finger. Their motions are stored positionally within queues. </p><div class="image">
<img src="TaskDiagram.png" alt=""/>
<div class="caption">
Task Diagram</div></div>
 </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0 </li>
  </ul>
</div>
</body>
</html>
